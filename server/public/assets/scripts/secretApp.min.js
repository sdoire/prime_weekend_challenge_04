/*! prime_weekend_challenge_04 2015-08-09 */
function getData(){$.ajax({type:"GET",url:"/messages",success:function(a){console.log(a),appendToContainer(a)}})}function appendToContainer(a){$("#container").empty();for(var b=0;b<a.length;b++){$("#container").append("<div class='post'></div>");var c=$("#container").children().last();c.append("<p>"+a[b].name+": </p>"),c.append("<p>"+a[b].message+"</p"),c.append("<button class='delete' data-id='"+a[b]._id+"'>DELETE</button>")}}$(document).ready(function(){$("#inputForm").submit(function(a){a.preventDefault();var b=$("#inputForm").serialize();console.log(b),$.ajax({type:"POST",url:"/messages",data:b,success:function(){getData()}})}),$("body").on("click","#reload",function(a){a.preventDefault(),getData()}),$("#inputForm").submit(function(){$(this).children("input[type=text]").val("")}),$("#container").on("click",".delete",function(){$.ajax({type:"DELETE",url:"/messages/"+$(this).data("id"),success:function(){console.log("Deletion sent")},error:function(a,b){alert("Error: ",b)},complete:function(){console.log("Delete Complete!")}}),$(this).parent().remove()}),getData()});